<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speech to ISL</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
    <!-- <link rel="stylesheet" type="text/css" href="C:/Users/Alisha-PC/Desktop/college stuff/Mega Project/fontawesome-free-5.15.3-web/fontawesome-free-5.15.3-web/css/all.css"> -->
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Bree+Serif&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
    <style>
        .container{
	padding: 50px 0;
    display: flex;
}
    #mic .col-sm-6:nth-child(2){
        padding-top: 85px;
        text-align: center;
    }
    #mic .col-sm-6 img{
        width: 100%;
    }
    #mic .col-sm-6 h1{
        font-family: 'Bree Serif', serif;
    }
    #mic .col-sm-6 .btn{
        height: 110px;
        width: 110px;
        border-radius: 80px;
        margin: 20px 25px;
        font-size: 20px;
        font-family: 'Bree Serif';
    }
    #mic .col-sm-6 p{
        font-family: 'Raleway', sans-serif;
        font-size: 20px;
    }
    #mic .col-sm-6 .btn i{
        font-size: 55px;
    }
    #button-set{
        display: inline-flex;
    }
    #start-btn{
        background-color: #08419e;
    }
    #cancel-btn{
        background-color: #9e087d;
    }
    #generate-btn{
        background-color: #64089e;
    }
    #textbox{
        font-family: 'Bree serif';
    }
    </style>
</head>

<body>
    <div class="row" id="mic">
        <div class="container">
            <div class="col-sm-6">
                <img src="/img/bg4.jpg">
            </div>
            <div class="col-sm-6">
                <form action="/speach" method="POST">
                    <h1 class="text-center mt-5">Speech-to-Indian Sign Language</h1>
                    <div class="form group mt-3">
                        <textarea type="" id="textbox" name="textbox" class="form-control" rows="2"></textarea>
                    </div>
                    <div class="form group mt-1" id="button-set">
                        <input type="button" id="start-btn" class="btn btn-dark btn-block" value="Start">
                        <input type="button" id="cancel-btn" class="btn btn-secondary btn-block" value="Cancel">
                        <button id="generate-btn" class="btn btn-dark btn-block">Generate</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition

    var recognition = new SpeechRecognition();

    var textbox = $("#textbox")
    var startbtn = $("#start-btn")


    var content = ''
    recognition.continuous = false

    recognition.onstart = function () {
        startbtn.text("Stop")
        $('#start-btn').attr('start-btn', 'stop-btn');
    }

    recognition.onspeechend = function () {
        startbtn.text("Start")
        $("#stop-btn").toggleClass('btn btn-dark btn-block');
    }

    recognition.onerror = function () {
        startbtn.text("Try again")
    }

    recognition.onresult = function (event) {
        var current = event.resultIndex;
        var transcript = event.results[current][0].transcript

        content += transcript
        textbox.val(content)
    }

    $("#generate-btn").click(function (event) {

    })

    $("#start-btn").click(function (event) {
        if (content.length) {
            content += ''
        }
        $('#start-btn').attr('start-btn', 'stop-btn');
        recognition.start()
    })

    $("#cancel-btn").click(function (event) {
        textbox.val('')
        content = ''
    })
</script>

</html>